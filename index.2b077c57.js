var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var o=a("dNTj1");a("dNTj1");o=a("dNTj1"),o=a("dNTj1");var l=a("dvsic");l=a("dvsic");async function i(e){localStorage.getItem(l.keyLS.LS_GENRE_KEY_EN)||(e.langCurrent=l.keyLS.LS_GENRE_KEY_EN,e.fetchGenre().then((e=>{localStorage.setItem(l.keyLS.LS_GENRE_KEY_EN,JSON.stringify(e.genres))})).catch((e=>console.log(e))),e.langCurrent=l.keyLS.LS_GENRE_KEY_UA,e.fetchGenre().then((e=>{localStorage.setItem(l.keyLS.LS_GENRE_KEY_UA,JSON.stringify(e.genres))})).catch((e=>console.log(e)))),e.langCurrent=(0,l.getLanguageFromLS)()}function c(e=[]){let t=localStorage.getItem(l.keyLS.LS_GENRE_KEY_EN),n="No genres",a="Other";switch((0,l.getLanguageFromLS)()){case o.Movie.language.ENGLISH:t=localStorage.getItem(l.keyLS.LS_GENRE_KEY_EN),n="No genres",a="Other";break;case o.Movie.language.UKRAINIAN:t=localStorage.getItem(l.keyLS.LS_GENRE_KEY_UA),n="Жанри відсутні",a="Інші"}if(!t||0===e.length)return n;const i=JSON.parse(t).reduce(((t,n)=>(e.includes(n.id)&&t.push(n.name),t)),[]);return 0===i.length?n:i.length>3?`${i[0]}, ${i[1]}, ${a}`:i.join(", ")}l=a("dvsic");function s(e){const t=document.querySelector(".gallery"),n=e.results.map((e=>`<li class="card">\n          <a class="card__link" href=""  >\n            <img data-id="${e.id}" class="card__img" src="${e.poster_path?o.Movie.IMG_PATH+e.poster_path:"https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj"}" alt="${e.title}" loading="lazy"/>\n      <div class="card__wrapper">\n            <p class="card__name">${e.title.toUpperCase()}</p>\n            <p class="card__description">${c(e.genre_ids)} | ${(0,l.noYearVariableLang)(e.release_date)}\n            <span class="card__vote">${Math.round(10*e.vote_average)/10}</span>\n            </p>\n            </div>\n          </a>\n        </li>`)).join("");t.innerHTML=n}function r(e){localStorage.setItem("themoviedb-current-data",JSON.stringify(e))}async function d(e){try{await i(e);const t=await e.fetchTrend();console.log(t),r(t.results),s(t),e.lastPage=t.total_pages}catch(e){console.log(e)}}async function u(e){try{await i(e);const t=await e.fetchSearch();console.log(t),r(t.results),s(t,e.langCurrent),e.lastPage=t.total_pages}catch(e){console.log(e)}}l=a("dvsic"),o=a("dNTj1"),l=a("dvsic"),o=a("dNTj1");var g=a("dzEJp");const p={btnSwitchDay:document.querySelector(".time-switch-day"),btnSwitchWeek:document.querySelector(".time-switch-week")};function m(e){switch(e){case o.Movie.trendTime.DAY:(0,g.disabledEl)(p.btnSwitchDay),(0,g.unlockEl)(p.btnSwitchWeek);break;case o.Movie.trendTime.WEEK:(0,g.disabledEl)(p.btnSwitchWeek),(0,g.unlockEl)(p.btnSwitchDay)}}p.btnSwitchDay.addEventListener("click",(function(){v.page=1,v.currentTrendTime=o.Movie.trendTime.DAY,d(v),m(o.Movie.trendTime.DAY),h()})),p.btnSwitchWeek.addEventListener("click",(function(){v.page=1,v.currentTrendTime=o.Movie.trendTime.WEEK,d(v),m(o.Movie.trendTime.WEEK),h()}));const _={formEl:document.querySelector(".search-form"),paragraphEl:document.querySelector(".warning-notification")};let f,v,S=null;function h(){S=null}_.formEl.addEventListener("submit",(async function(e){try{if(e.preventDefault(),S=e.target.query.value.trim(),""===S)return void(_.paragraphEl.innerHTML="Enter the name in the search field");f=new(0,o.Movie)(S),f.langCurrent=(0,l.getLanguageFromLS)();const t=await f.fetchSearch();if(0===t.total_results)return e.target.reset(),void(_.paragraphEl.innerHTML="Search result not successful. Enter the correct movie name and try again.");s(t),e.target.reset(),_.paragraphEl.innerHTML="",console.log(t),f.lastPage=t.total_pages,r(t.results),(0,g.unlockEl)(p.btnSwitchDay),(0,g.unlockEl)(p.btnSwitchWeek)}catch(e){console.log(e.message)}})),null===S&&function(){v=new(0,o.Movie);const e=(0,l.getLanguageFromLS)();e?(v.langCurrent=e,(0,l.switchBtnLang)(v.langCurrent)):v.langCurrent=(0,l.setLanguageToLS)(o.Movie.language.ENGLISH);d(v),m(o.Movie.trendTime.DAY)}();o=a("dNTj1");(l=a("dvsic")).refs.btnSwitchEN.addEventListener("click",(function(){null===S?(v.langCurrent=(0,l.setLanguageToLS)(o.Movie.language.ENGLISH),d(v)):(f.langCurrent=(0,l.setLanguageToLS)(o.Movie.language.ENGLISH),u(f))})),l.refs.btnSwitchUA.addEventListener("click",(function(){null===S?(v.langCurrent=(0,l.setLanguageToLS)(o.Movie.language.UKRAINIAN),d(v)):(f.langCurrent=(0,l.setLanguageToLS)(o.Movie.language.UKRAINIAN),u(f))})),a("dNTj1");const L=document.querySelector(".scroll-area"),E=document.querySelector(".up-btn"),b=document.querySelector(".icon__button");function y(){L.scrollIntoView({block:"center",behavior:"smooth"})}E.addEventListener("click",y),window.addEventListener("scroll",(()=>{scrollY>230&&(b.classList.add("icon__button--opacity"),b.style.position="fixed"),scrollY<230&&(b.classList.remove("icon__button--opacity"),b.style.position="absolute"),scrollY>300?E.classList.remove("is-hidden"):scrollY<300&&E.classList.add("is-hidden")}));const N={btnLoadPrevious:document.querySelector(".pagination-page__btn-previous"),btnLoadNext:document.querySelector(".pagination-page__btn-next")};N.btnLoadPrevious.addEventListener("click",(function(){if(null===S?1===v.page:1===f.page)return;null===S?v.page-=1:f.page-=1,w(),y()})),N.btnLoadNext.addEventListener("click",(function(){if(null===S?v.page===v.lastPage:f.page===f.lastPage)return;null===S?v.page+=1:f.page+=1,w(),y()}));const k=document.querySelector(".pagination ul");function w(){null===S?d(v):u(f)}!function e(t){!function(e,t){let n,a="",o=t-1,l=t+1;t>1&&(a+='<li class="btn prev"><span><<</span></li>');t>2&&(e>3&&(a+='<li class="first numb"><span>1</span></li>'),t>3&&(a+='<li class="dots"><span>...</span></li>'));e>2&&(l+=1);t==e?o-=2:t==e-1?o-=1:1==e&&(o=1);for(var i=o;i<=l;i++)i>e||(i<1&&(i=1),n=t==i?"active":"",a+=`<li class="numb ${n}"><span>${i}</span></li>`);t<e-1&&(t<e-2&&(a+='<li class="dots"><span>...</span></li>'),e>3&&(a+=`<li class="last numb"><span>${e}</span></li>`));t<e&&(a+='<li class="btn next"><span>>></span></li>');k.innerHTML="",k.insertAdjacentHTML("beforeend",a)}(20,t.page);const{prev:n,numb:a,next:o}={prev:document.querySelector(".prev"),numb:document.querySelectorAll(".numb"),next:document.querySelector(".next")};a.forEach((n=>{n.addEventListener("click",(n=>{const a=n.target.textContent;t.page=a,w(),e(t)}))})),n&&n.addEventListener("click",(()=>{t.page-=1,w(),e(t)})),o&&o.addEventListener("click",(()=>{t.page+=1,w(),e(t)}))}(v),a("lMgIy");o=a("dNTj1");const T=document.querySelector("body"),q=document.querySelector(".gallery"),M=document.querySelector(".backdrop"),I=document.querySelector(".modal__button"),A=document.querySelector(".modal-info__container");let x=0,$={};q.addEventListener("click",(function(e){const t=JSON.parse(localStorage.getItem("themoviedb-current-data"));e.preventDefault(),x=Number(e.target.dataset.id),t.map((e=>{e.id===x&&(!function({poster_path:e,title:t,original_title:n,genre_ids:a,overview:l,vote_count:i,vote_average:s,popularity:r}){const d=`\n      <img src="${e?o.Movie.IMG_PATH+e:"https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj"}" alt="${t}" class="modal-info__img">\n      <div class="modal-info">\n          <h2 class="modal-info__movie-name">${t.toUpperCase()}</h2>\n              <ul class="modal-info__list">\n              <li class="modal-info__item">\n                    <p class="modal-info__title">Vote / Votes<p>\n                    <div class="modal-info__content">\n                        <span class="modal-info__content-color"> ${Math.round(10*s)/10} </span> / <span class="modal-info__content-color modal-info__content-color--votes">${i}</span>\n                    </div>\n                </li>\n                <li class="modal-info__item">\n                    <p class="modal-info__title">Popularity</p>\n                    <div class="modal-info__content">${r.toFixed(1)}</div>\n                </li>\n                  <li class="modal-info__item">\n                      <p class="modal-info__title">Original Title</p>\n                      <div class="modal-info__content modal-info__content--text ">${n.toUpperCase()}</div>\n                  </li>\n                  <li class="modal-info__item">\n                      <p class="modal-info__title">Genre</p>\n                      <div class="modal-info__content modal-info__content--text">${c(a)}</div>\n                  </li>\n              </ul>\n                  <p class="modal-info__article-title">About</p>\n                  <p class="modal-info__article">${l}</p>\n                  <div class="container-btn">\n            <button type="button" class="btn" name="watched">add to watched</button>\n            <button type="button" class="btn" name="queue">add to queue</button>\n        </div>`;A.innerHTML=d}(e),$=e)})),e.target!==e.currentTarget&&(T.classList.add("modal-open"),M.classList.remove("is-hidden"))})),I.addEventListener("click",(function(e){T.classList.remove("modal-open"),M.classList.add("is-hidden")})),A.addEventListener("click",(function(e){"watched"===e.target.name?Y():"queue"===e.target.name&&C()})),M.addEventListener("click",(function(e){e.target===e.currentTarget&&(T.classList.remove("modal-open"),M.classList.add("is-hidden"))}));let D=[],R=[];const Y=()=>{D=JSON.parse(localStorage.getItem("themovie-watched-lib"))||[];const e=[];D.map((t=>e.push(t.id))),e.includes(x)||(D.push($),localStorage.setItem("themovie-watched-lib",JSON.stringify(D)),console.log("watched:  "+e))},C=()=>{R=JSON.parse(localStorage.getItem("themovie-queue-lib"))||[];const e=[];R.map((t=>e.push(t.id))),e.includes(x)?console.log("есть уже"):(R.push($),localStorage.setItem("themovie-queue-lib",JSON.stringify(R)),console.log("queue:  "+e))},G=document.querySelector(".footer-text__link"),j=document.querySelector(".backdrop-team"),F=document.querySelector(".modal-team__button");G.addEventListener("click",(function(e){e.preventDefault(),j.classList.remove("is-hidden")})),F.addEventListener("click",(function(e){e.preventDefault(),j.classList.add("is-hidden")}));
//# sourceMappingURL=index.2b077c57.js.map
