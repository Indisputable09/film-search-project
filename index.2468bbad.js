!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r);var o=r("8MBJY"),c=r("a2hTj"),l=function(){"use strict";function t(){e(o)(this,t),this.refs=this.getRefs()}return e(c)(t,[{key:"getRefs",value:function(){var e={};return e.preloader=document.querySelector(".overlay"),e.loader=document.querySelectorAll(".loader"),e}},{key:"enable",value:function(){this.refs.loader.forEach((function(e){e.classList.add("is-off")}))}},{key:"disable",value:function(){this.refs.loader.forEach((function(e){e.classList.remove("is-off")}))}}]),t}(),i=r("4cG42"),s=r("bpxeT"),u=r("2TvXO");r("4cG42");i=r("4cG42"),s=r("bpxeT"),u=r("2TvXO"),i=r("4cG42");var d=r("Jmfug");d=r("Jmfug");function f(e){return g.apply(this,arguments)}function g(){return(g=e(s)(e(u).mark((function t(n){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.getItem(d.keyLS.LS_GENRE_KEY_EN)||(n.langCurrent=d.keyLS.LS_GENRE_KEY_EN,n.fetchGenre().then((function(e){localStorage.setItem(d.keyLS.LS_GENRE_KEY_EN,JSON.stringify(e.genres))})).catch((function(e){return console.log(e)})),n.langCurrent=d.keyLS.LS_GENRE_KEY_UA,n.fetchGenre().then((function(e){localStorage.setItem(d.keyLS.LS_GENRE_KEY_UA,JSON.stringify(e.genres))})).catch((function(e){return console.log(e)}))),n.langCurrent=(0,d.getLanguageFromLS)();case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=localStorage.getItem(d.keyLS.LS_GENRE_KEY_EN),n="No genres",a="Other",r=(0,d.getLanguageFromLS)();switch(r){case i.Movie.language.ENGLISH:t=localStorage.getItem(d.keyLS.LS_GENRE_KEY_EN),n="No genres",a="Other";break;case i.Movie.language.UKRAINIAN:t=localStorage.getItem(d.keyLS.LS_GENRE_KEY_UA),n="Жанри відсутні",a="Інші"}if(!t||0===e.length)return n;var o=JSON.parse(t),c=o.reduce((function(t,n){return e.includes(n.id)&&t.push(n.name),t}),[]);return 0===c.length?n:c.length>3?"".concat(c[0],", ").concat(c[1],", ").concat(a):c.join(", ")}d=r("Jmfug");var m=new l;function v(e){var t=document.querySelector(".gallery"),n=e.results.map((function(e){return'<li class="card">\n          <a class="card__link" href=""  >\n            <img data-id="'.concat(e.id,'" class="card__img" src="').concat(e.poster_path?i.Movie.IMG_PATH+e.poster_path:"https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj",'" alt="').concat(e.title,'" loading="lazy"/>\n      <div class="card__wrapper">\n            <p class="card__name">').concat(e.title.toUpperCase(),'</p>\n            <p class="card__description">').concat(p(e.genre_ids)," | ").concat((0,d.noYearVariableLang)(e.release_date),'\n            <span class="card__vote">').concat(Math.round(10*e.vote_average)/10,"</span>\n            </p>\n            </div>\n          </a>\n        </li>")})).join("");t.innerHTML=n,m.refs.preloader.classList.add("is-off"),m.enable()}var _="themoviedb-current-data";function h(e){localStorage.setItem(_,JSON.stringify(e))}function S(e){return b.apply(this,arguments)}function b(){return(b=e(s)(e(u).mark((function t(n){var a;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(n);case 3:return e.next=5,n.fetchTrend();case 5:a=e.sent,console.log(a),h(a.results),v(a),n.lastPage=a.total_pages,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function L(e){return E.apply(this,arguments)}function E(){return(E=e(s)(e(u).mark((function t(n){var a;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(n);case 3:return e.next=5,n.fetchSearch();case 5:a=e.sent,console.log(a),h(a.results),v(a,n.langCurrent),n.lastPage=a.total_pages,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}d=r("Jmfug"),s=r("bpxeT"),u=r("2TvXO"),i=r("4cG42"),d=r("Jmfug"),i=r("4cG42");var y=r("6JEwH"),k={btnSwitchDay:document.querySelector(".time-switch-day"),btnSwitchWeek:document.querySelector(".time-switch-week")};function w(e){switch(e){case i.Movie.trendTime.DAY:(0,y.disabledEl)(k.btnSwitchDay),(0,y.unlockEl)(k.btnSwitchWeek);break;case i.Movie.trendTime.WEEK:(0,y.disabledEl)(k.btnSwitchWeek),(0,y.unlockEl)(k.btnSwitchDay)}}function N(){(0,y.unlockEl)(k.btnSwitchDay),(0,y.unlockEl)(k.btnSwitchWeek)}k.btnSwitchDay.addEventListener("click",(function(){G.page=1,G.currentTrendTime=i.Movie.trendTime.DAY,S(G),w(i.Movie.trendTime.DAY),A()})),k.btnSwitchWeek.addEventListener("click",(function(){G.page=1,G.currentTrendTime=i.Movie.trendTime.WEEK,S(G),w(i.Movie.trendTime.WEEK),A()}));var x,T=new l,q={formEl:document.querySelector(".search-form"),paragraphEl:document.querySelector(".warning-notification")},M=null;function I(){return(I=e(s)(e(u).mark((function t(n){var a;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.disable(),e.prev=1,n.preventDefault(),""!==(M=n.target.query.value.trim())){e.next=8;break}return q.paragraphEl.innerHTML="Enter the name in the search field",T.enable(),e.abrupt("return");case 8:return(x=new(0,i.Movie)(M)).langCurrent=(0,d.getLanguageFromLS)(),e.next=12,x.fetchSearch();case 12:if(0!==(a=e.sent).total_results){e.next=18;break}return n.target.reset(),q.paragraphEl.innerHTML="Search result not successful. Enter the correct movie name and try again.",T.enable(),e.abrupt("return");case 18:v(a),n.target.reset(),q.paragraphEl.innerHTML="",console.log(a),x.lastPage=a.total_pages,h(a.results),N(),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(1),console.log(e.t0.message);case 30:case"end":return e.stop()}}),t,null,[[1,27]])})))).apply(this,arguments)}function A(){M=null}q.formEl.addEventListener("submit",(function(e){return I.apply(this,arguments)}));var G,R=new l;console.log(R.refs.preloader),null===M&&function(){R.refs.preloader.classList.remove("is-off"),G=new(0,i.Movie);var e=(0,d.getLanguageFromLS)();e?(G.langCurrent=e,(0,d.switchBtnLang)(G.langCurrent)):G.langCurrent=(0,d.setLanguageToLS)(i.Movie.language.ENGLISH);S(G),w(i.Movie.trendTime.DAY)}();i=r("4cG42");(d=r("Jmfug")).refs.btnSwitchEN.addEventListener("click",(function(){null===M?(G.langCurrent=(0,d.setLanguageToLS)(i.Movie.language.ENGLISH),S(G)):(x.langCurrent=(0,d.setLanguageToLS)(i.Movie.language.ENGLISH),L(x))})),d.refs.btnSwitchUA.addEventListener("click",(function(){null===M?(G.langCurrent=(0,d.setLanguageToLS)(i.Movie.language.UKRAINIAN),S(G)):(x.langCurrent=(0,d.setLanguageToLS)(i.Movie.language.UKRAINIAN),L(x))})),r("4cG42");var D=document.querySelector(".scroll-area"),Y=document.querySelector(".up-btn"),J=document.querySelector(".icon__button");function O(){D.scrollIntoView({block:"center",behavior:"smooth"})}Y.addEventListener("click",O),window.addEventListener("scroll",(function(){scrollY>230&&(J.classList.add("icon__button--opacity"),J.style.position="fixed"),scrollY<230&&(J.classList.remove("icon__button--opacity"),J.style.position="absolute"),scrollY>300?Y.classList.remove("is-hidden"):scrollY<300&&Y.classList.add("is-hidden")}));var C=new l,F={btnLoadPrevious:document.querySelector(".pagination-page__btn-previous"),btnLoadNext:document.querySelector(".pagination-page__btn-next")};F.btnLoadPrevious.addEventListener("click",(function(){if(C.disable(),null===M?1===G.page:1===x.page)return void C.enable();null===M?G.page-=1:x.page-=1,P(),O()})),F.btnLoadNext.addEventListener("click",(function(){if(C.disable(),null===M?G.page===G.lastPage:x.page===x.lastPage)return;null===M?G.page+=1:x.page+=1,P(),O()}));var K=document.querySelector(".pagination ul");function P(){null===M?S(G):L(x)}!function e(t){!function(e,t){var n="",a=t-1,r=t+1;t>1&&(n+='<li class="btn prev"><span><<</span></li>');t>2&&(e>3&&(n+='<li class="first numb"><span>1</span></li>'),t>3&&(n+='<li class="dots"><span>...</span></li>'));e>2&&(r+=1);t==e?a-=2:t==e-1?a-=1:1==e&&(a=1);for(var o=a;o<=r;o++)o>e||(o<1&&(o=1),n+='<li class="numb '.concat(t==o?"active":"",'"><span>').concat(o,"</span></li>"));t<e-1&&(t<e-2&&(n+='<li class="dots"><span>...</span></li>'),e>3&&(n+='<li class="last numb"><span>'.concat(e,"</span></li>")));t<e&&(n+='<li class="btn next"><span>>></span></li>');K.innerHTML="",K.insertAdjacentHTML("beforeend",n)}(20,t.page);var n={prev:document.querySelector(".prev"),numb:document.querySelectorAll(".numb"),next:document.querySelector(".next")},a=n.prev,r=n.next;n.numb.forEach((function(n){n.addEventListener("click",(function(n){var a=n.target.textContent;t.page=a,P(),e(t)}))})),a&&a.addEventListener("click",(function(){t.page-=1,P(),e(t)})),r&&r.addEventListener("click",(function(){t.page+=1,P(),e(t)}))}(G),r("3nfD2");i=r("4cG42");var H=document.querySelector("body"),U=document.querySelector(".gallery"),j=document.querySelector(".backdrop"),W=document.querySelector(".modal__button"),V=document.querySelector(".modal-info__container"),z=document.querySelector(".modal"),X=0,B={};function Z(e){z.contains(e.target)&&!W.contains(e.target)||(H.classList.remove("modal-open"),j.classList.add("is-hidden"))}U.addEventListener("click",(function(e){var t=JSON.parse(localStorage.getItem(_));e.preventDefault(),X=Number(e.target.dataset.id),t.map((function(e){var t,n,a,r,o,c,l,s,u,d;e.id===X&&(n=(t=e).poster_path,a=t.title,r=t.original_title,o=t.genre_ids,c=t.overview,l=t.vote_count,s=t.vote_average,u=t.popularity,d='\n      <img src="'.concat(n?i.Movie.IMG_PATH+n:"https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj",'" alt="').concat(a,'" class="modal-info__img">\n      <div class="modal-info">\n          <h2 class="modal-info__movie-name">').concat(a.toUpperCase(),'</h2>\n          <table class="modal-info__list" >\n              <tr class="modal-info__item">\n                <th class="modal-info__title">Vote / Votes</th>\n                <th class="modal-info__content"><span class="modal-info__content-color"> ').concat(Math.round(10*s)/10,' </span> / <span class="modal-info__content-color modal-info__content-color--votes">').concat(l,'</span></th>\n              </tr>\n              <tr class="modal-info__item">\n                <td class="modal-info__title">Popularity</td>\n                <td class="modal-info__content">').concat(u.toFixed(1),'\n                </td>\n              </tr>\n              <tr class="modal-info__item">\n                <td class="modal-info__title">Original Title</td>\n                <td class="modal-info__content modal-info__content--text">').concat(r.toUpperCase(),'</td>\n              </tr>\n              <tr class="modal-info__item">\n                <td class="modal-info__title">Genre</td>\n                <td class="modal-info__content">').concat(p(o),'</td>\n              </tr>\n              </table>            \n                  <p class="modal-info__article-title">About</p>\n                  <p class="modal-info__article">').concat(c,'</p>\n                  <div class="container-btn">\n            <button type="button" class="btn" name="watched">add to watched</button>\n            <button type="button" class="btn" name="queue">add to queue</button>\n        </div>'),V.innerHTML=d,B=e)})),e.target!==e.currentTarget&&(H.classList.add("modal-open"),j.classList.remove("is-hidden"))})),W.addEventListener("click",Z),V.addEventListener("click",(function(e){"watched"===e.target.name?ne():"queue"===e.target.name&&ae()})),j.addEventListener("click",Z);var Q=[],$=[],ee="themovie-watched-lib",te="themovie-queue-lib";var ne=function(){Q=JSON.parse(localStorage.getItem(ee))||[];var e=[];Q.map((function(t){return e.push(t.id)})),e.includes(X)||(Q.push(B),localStorage.setItem(ee,JSON.stringify(Q)),console.log("watched:  "+e))},ae=function(){$=JSON.parse(localStorage.getItem(te))||[];var e=[];$.map((function(t){return e.push(t.id)})),e.includes(X)?console.log("есть уже"):($.push(B),localStorage.setItem(te,JSON.stringify($)),console.log("queue:  "+e))},re=document.querySelector(".footer-text__link"),oe=document.querySelector(".backdrop-team"),ce=document.querySelector(".modal-team__button"),le=document.querySelector("body");re.addEventListener("click",(function(e){e.preventDefault(),oe.classList.remove("is-hidden"),le.classList.add("modal-team-open")})),ce.addEventListener("click",(function(e){oe.classList.add("is-hidden"),le.classList.remove("modal-team-open")}))}();
//# sourceMappingURL=index.2468bbad.js.map
