var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);class o{getRefs(){const e={};return e.preloader=document.querySelector(".overlay"),e.loader=document.querySelectorAll(".loader"),e}enable(){this.refs.loader.forEach((e=>{e.classList.add("is-off")}))}disable(){this.refs.loader.forEach((e=>{e.classList.remove("is-off")}))}constructor(){this.refs=this.getRefs()}}var l=a("dNTj1");a("dNTj1");l=a("dNTj1"),l=a("dNTj1");var i=a("dvsic");i=a("dvsic");async function s(e){localStorage.getItem(i.keyLS.LS_GENRE_KEY_EN)||(e.langCurrent=i.keyLS.LS_GENRE_KEY_EN,e.fetchGenre().then((e=>{localStorage.setItem(i.keyLS.LS_GENRE_KEY_EN,JSON.stringify(e.genres))})).catch((e=>console.log(e))),e.langCurrent=i.keyLS.LS_GENRE_KEY_UA,e.fetchGenre().then((e=>{localStorage.setItem(i.keyLS.LS_GENRE_KEY_UA,JSON.stringify(e.genres))})).catch((e=>console.log(e)))),e.langCurrent=(0,i.getLanguageFromLS)()}function c(e=[]){let t=localStorage.getItem(i.keyLS.LS_GENRE_KEY_EN),n="No genres",a="Other";switch((0,i.getLanguageFromLS)()){case l.Movie.language.ENGLISH:t=localStorage.getItem(i.keyLS.LS_GENRE_KEY_EN),n="No genres",a="Other";break;case l.Movie.language.UKRAINIAN:t=localStorage.getItem(i.keyLS.LS_GENRE_KEY_UA),n="Жанри відсутні",a="Інші"}if(!t||0===e.length)return n;const o=JSON.parse(t).reduce(((t,n)=>(e.includes(n.id)&&t.push(n.name),t)),[]);return 0===o.length?n:o.length>3?`${o[0]}, ${o[1]}, ${a}`:o.join(", ")}i=a("dvsic");const r=new o;function d(e){const t=document.querySelector(".gallery"),n=e.results.map((e=>`<li class="card">\n          <a class="card__link" href=""  >\n            <img data-id="${e.id}" class="card__img" src="${e.poster_path?l.Movie.IMG_PATH+e.poster_path:"https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj"}" alt="${e.title}" loading="lazy"/>\n      <div class="card__wrapper">\n            <p class="card__name">${e.title.toUpperCase()}</p>\n            <p class="card__description">${c(e.genre_ids)} | ${(0,i.noYearVariableLang)(e.release_date)}\n            <span class="card__vote">${Math.round(10*e.vote_average)/10}</span>\n            </p>\n            </div>\n          </a>\n        </li>`)).join("");t.innerHTML=n,r.refs.preloader.classList.add("is-off"),r.enable()}function u(e){localStorage.setItem("themoviedb-current-data",JSON.stringify(e))}async function g(e){try{await s(e);const t=await e.fetchTrend();console.log(t),u(t.results),d(t),e.lastPage=t.total_pages}catch(e){console.log(e)}}async function m(e){try{await s(e);const t=await e.fetchSearch();console.log(t),u(t.results),d(t,e.langCurrent),e.lastPage=t.total_pages}catch(e){console.log(e)}}i=a("dvsic"),l=a("dNTj1"),i=a("dvsic"),l=a("dNTj1");var p=a("dzEJp");const f={btnSwitchDay:document.querySelector(".time-switch-day"),btnSwitchWeek:document.querySelector(".time-switch-week")};function _(e){switch(e){case l.Movie.trendTime.DAY:(0,p.disabledEl)(f.btnSwitchDay),(0,p.unlockEl)(f.btnSwitchWeek);break;case l.Movie.trendTime.WEEK:(0,p.disabledEl)(f.btnSwitchWeek),(0,p.unlockEl)(f.btnSwitchDay)}}f.btnSwitchDay.addEventListener("click",(function(){y.page=1,y.currentTrendTime=l.Movie.trendTime.DAY,g(y),_(l.Movie.trendTime.DAY),b()})),f.btnSwitchWeek.addEventListener("click",(function(){y.page=1,y.currentTrendTime=l.Movie.trendTime.WEEK,g(y),_(l.Movie.trendTime.WEEK),b()}));const v=new o,h={formEl:document.querySelector(".search-form"),paragraphEl:document.querySelector(".warning-notification")};let S,L=null;function b(){L=null}h.formEl.addEventListener("submit",(async function(e){v.disable();try{if(e.preventDefault(),L=e.target.query.value.trim(),""===L)return h.paragraphEl.innerHTML="Enter the name in the search field",void v.enable();S=new(0,l.Movie)(L),S.langCurrent=(0,i.getLanguageFromLS)();const t=await S.fetchSearch();if(0===t.total_results)return e.target.reset(),h.paragraphEl.innerHTML="Search result not successful. Enter the correct movie name and try again.",void v.enable();d(t),e.target.reset(),h.paragraphEl.innerHTML="",console.log(t),S.lastPage=t.total_pages,u(t.results),(0,p.unlockEl)(f.btnSwitchDay),(0,p.unlockEl)(f.btnSwitchWeek)}catch(e){console.log(e.message)}}));const E=new o;let y;console.log(E.refs.preloader),null===L&&function(){E.refs.preloader.classList.remove("is-off"),y=new(0,l.Movie);const e=(0,i.getLanguageFromLS)();e?(y.langCurrent=e,(0,i.switchBtnLang)(y.langCurrent)):y.langCurrent=(0,i.setLanguageToLS)(l.Movie.language.ENGLISH);g(y),_(l.Movie.trendTime.DAY)}();l=a("dNTj1");(i=a("dvsic")).refs.btnSwitchEN.addEventListener("click",(function(){null===L?(y.langCurrent=(0,i.setLanguageToLS)(l.Movie.language.ENGLISH),g(y)):(S.langCurrent=(0,i.setLanguageToLS)(l.Movie.language.ENGLISH),m(S))})),i.refs.btnSwitchUA.addEventListener("click",(function(){null===L?(y.langCurrent=(0,i.setLanguageToLS)(l.Movie.language.UKRAINIAN),g(y)):(S.langCurrent=(0,i.setLanguageToLS)(l.Movie.language.UKRAINIAN),m(S))})),a("dNTj1");const N=document.querySelector(".scroll-area"),k=document.querySelector(".up-btn"),w=document.querySelector(".icon__button");function T(){N.scrollIntoView({block:"center",behavior:"smooth"})}k.addEventListener("click",T),window.addEventListener("scroll",(()=>{scrollY>230&&(w.classList.add("icon__button--opacity"),w.style.position="fixed"),scrollY<230&&(w.classList.remove("icon__button--opacity"),w.style.position="absolute"),scrollY>300?k.classList.remove("is-hidden"):scrollY<300&&k.classList.add("is-hidden")}));const q=new o,M={btnLoadPrevious:document.querySelector(".pagination-page__btn-previous"),btnLoadNext:document.querySelector(".pagination-page__btn-next")};M.btnLoadPrevious.addEventListener("click",(function(){if(q.disable(),null===L?1===y.page:1===S.page)return void q.enable();null===L?y.page-=1:S.page-=1,A(),T()})),M.btnLoadNext.addEventListener("click",(function(){if(q.disable(),null===L?y.page===y.lastPage:S.page===S.lastPage)return;null===L?y.page+=1:S.page+=1,A(),T()}));const I=document.querySelector(".pagination ul");function A(){null===L?g(y):m(S)}!function e(t){!function(e,t){let n,a="",o=t-1,l=t+1;t>1&&(a+='<li class="btn prev"><span><<</span></li>');t>2&&(e>3&&(a+='<li class="first numb"><span>1</span></li>'),t>3&&(a+='<li class="dots"><span>...</span></li>'));e>2&&(l+=1);t==e?o-=2:t==e-1?o-=1:1==e&&(o=1);for(var i=o;i<=l;i++)i>e||(i<1&&(i=1),n=t==i?"active":"",a+=`<li class="numb ${n}"><span>${i}</span></li>`);t<e-1&&(t<e-2&&(a+='<li class="dots"><span>...</span></li>'),e>3&&(a+=`<li class="last numb"><span>${e}</span></li>`));t<e&&(a+='<li class="btn next"><span>>></span></li>');I.innerHTML="",I.insertAdjacentHTML("beforeend",a)}(20,t.page);const{prev:n,numb:a,next:o}={prev:document.querySelector(".prev"),numb:document.querySelectorAll(".numb"),next:document.querySelector(".next")};a.forEach((n=>{n.addEventListener("click",(n=>{const a=n.target.textContent;t.page=a,A(),e(t)}))})),n&&n.addEventListener("click",(()=>{t.page-=1,A(),e(t)})),o&&o.addEventListener("click",(()=>{t.page+=1,A(),e(t)}))}(y),a("lMgIy");l=a("dNTj1");const x=document.querySelector("body"),R=document.querySelector(".gallery"),$=document.querySelector(".backdrop"),D=document.querySelector(".modal__button"),Y=document.querySelector(".modal-info__container");let C=0,G={};R.addEventListener("click",(function(e){const t=JSON.parse(localStorage.getItem("themoviedb-current-data"));e.preventDefault(),C=Number(e.target.dataset.id),t.map((e=>{e.id===C&&(!function({poster_path:e,title:t,original_title:n,genre_ids:a,overview:o,vote_count:i,vote_average:s,popularity:r}){const d=`\n      <img src="${e?l.Movie.IMG_PATH+e:"https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj"}" alt="${t}" class="modal-info__img">\n      <div class="modal-info">\n          <h2 class="modal-info__movie-name">${t.toUpperCase()}</h2>\n              <ul class="modal-info__list">\n              <li class="modal-info__item">\n                    <p class="modal-info__title">Vote / Votes<p>\n                    <div class="modal-info__content">\n                        <span class="modal-info__content-color"> ${Math.round(10*s)/10} </span> / <span class="modal-info__content-color modal-info__content-color--votes">${i}</span>\n                    </div>\n                </li>\n                <li class="modal-info__item">\n                    <p class="modal-info__title">Popularity</p>\n                    <div class="modal-info__content">${r.toFixed(1)}</div>\n                </li>\n                  <li class="modal-info__item">\n                      <p class="modal-info__title">Original Title</p>\n                      <div class="modal-info__content modal-info__content--text ">${n.toUpperCase()}</div>\n                  </li>\n                  <li class="modal-info__item">\n                      <p class="modal-info__title">Genre</p>\n                      <div class="modal-info__content modal-info__content--text">${c(a)}</div>\n                  </li>\n              </ul>\n                  <p class="modal-info__article-title">About</p>\n                  <p class="modal-info__article">${o}</p>\n                  <div class="container-btn">\n            <button type="button" class="btn" name="watched">add to watched</button>\n            <button type="button" class="btn" name="queue">add to queue</button>\n        </div>`;Y.innerHTML=d}(e),G=e)})),e.target!==e.currentTarget&&(x.classList.add("modal-open"),$.classList.remove("is-hidden"))})),D.addEventListener("click",(function(e){x.classList.remove("modal-open"),$.classList.add("is-hidden")})),Y.addEventListener("click",(function(e){"watched"===e.target.name?K():"queue"===e.target.name&&P()})),$.addEventListener("click",(function(e){e.target===e.currentTarget&&(x.classList.remove("modal-open"),$.classList.add("is-hidden"))}));let j=[],F=[];const K=()=>{j=JSON.parse(localStorage.getItem("themovie-watched-lib"))||[];const e=[];j.map((t=>e.push(t.id))),e.includes(C)||(j.push(G),localStorage.setItem("themovie-watched-lib",JSON.stringify(j)),console.log("watched:  "+e))},P=()=>{F=JSON.parse(localStorage.getItem("themovie-queue-lib"))||[];const e=[];F.map((t=>e.push(t.id))),e.includes(C)?console.log("есть уже"):(F.push(G),localStorage.setItem("themovie-queue-lib",JSON.stringify(F)),console.log("queue:  "+e))},O=document.querySelector(".footer-text__link"),H=document.querySelector(".backdrop-team"),J=document.querySelector(".modal-team__button"),U=document.querySelector("body");O.addEventListener("click",(function(e){e.preventDefault(),H.classList.remove("is-hidden"),U.classList.add("modal-team-open")})),J.addEventListener("click",(function(e){H.classList.add("is-hidden"),U.classList.remove("modal-team-open")}));
//# sourceMappingURL=index.4aff8c32.js.map
