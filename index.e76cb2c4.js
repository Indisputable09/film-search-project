!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequired7c6=o);var r=o("8MBJY"),c=o("a2hTj"),i=function(){"use strict";function t(){e(r)(this,t),this.refs=this.getRefs()}return e(c)(t,[{key:"getRefs",value:function(){var e={};return e.preloader=document.querySelector(".overlay"),e.loader=document.querySelectorAll(".loader"),e}},{key:"enable",value:function(){this.refs.loader.forEach((function(e){e.classList.add("is-off")}))}},{key:"disable",value:function(){this.refs.loader.forEach((function(e){e.classList.remove("is-off")}))}}]),t}(),l=o("4cG42"),s=o("bpxeT"),u=o("2TvXO");o("4cG42");l=o("4cG42"),s=o("bpxeT"),u=o("2TvXO"),l=o("4cG42");var d=o("Jmfug");d=o("Jmfug");function p(e){return f.apply(this,arguments)}function f(){return(f=e(s)(e(u).mark((function t(n){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.getItem(d.keyLS.LS_GENRE_KEY_EN)||(n.langCurrent=d.keyLS.LS_GENRE_KEY_EN,n.fetchGenre().then((function(e){localStorage.setItem(d.keyLS.LS_GENRE_KEY_EN,JSON.stringify(e.genres))})).catch((function(e){return console.log(e)})),n.langCurrent=d.keyLS.LS_GENRE_KEY_UA,n.fetchGenre().then((function(e){localStorage.setItem(d.keyLS.LS_GENRE_KEY_UA,JSON.stringify(e.genres))})).catch((function(e){return console.log(e)}))),n.langCurrent=(0,d.getLanguageFromLS)();case 3:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=localStorage.getItem(d.keyLS.LS_GENRE_KEY_EN),n="No genres",a="Other",o=(0,d.getLanguageFromLS)();switch(o){case l.Movie.language.ENGLISH:t=localStorage.getItem(d.keyLS.LS_GENRE_KEY_EN),n="No genres",a="Other";break;case l.Movie.language.UKRAINIAN:t=localStorage.getItem(d.keyLS.LS_GENRE_KEY_UA),n="Жанри відсутні",a="Інші"}if(!t||0===e.length)return n;var r=JSON.parse(t),c=r.reduce((function(t,n){return e.includes(n.id)&&t.push(n.name),t}),[]);return 0===c.length?n:c.length>3?"".concat(c[0],", ").concat(c[1],", ").concat(a):c.join(", ")}d=o("Jmfug");var m=new i;function v(e){var t=document.querySelector(".gallery"),n=e.results.map((function(e){return'<li class="card">\n          <a class="card__link" href=""  >\n            <img data-id="'.concat(e.id,'" class="card__img" src="').concat(e.poster_path?l.Movie.IMG_PATH+e.poster_path:"https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj",'" alt="').concat(e.title,'" loading="lazy"/>\n      <div class="card__wrapper">\n            <p class="card__name">').concat(e.title.toUpperCase(),'</p>\n            <p class="card__description">').concat(g(e.genre_ids)," | ").concat((0,d.noYearVariableLang)(e.release_date),'\n            <span class="card__vote">').concat(Math.round(10*e.vote_average)/10,"</span>\n            </p>\n            </div>\n          </a>\n        </li>")})).join("");t.innerHTML=n,m.refs.preloader.classList.add("is-off"),m.enable()}var _="themoviedb-current-data";function h(e){localStorage.setItem(_,JSON.stringify(e))}function S(e){return L.apply(this,arguments)}function L(){return(L=e(s)(e(u).mark((function t(n){var a;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(n);case 3:return e.next=5,n.fetchTrend();case 5:a=e.sent,console.log(a),h(a.results),v(a),n.lastPage=a.total_pages,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function b(e){return E.apply(this,arguments)}function E(){return(E=e(s)(e(u).mark((function t(n){var a;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(n);case 3:return e.next=5,n.fetchSearch();case 5:a=e.sent,console.log(a),h(a.results),v(a,n.langCurrent),n.lastPage=a.total_pages,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}d=o("Jmfug"),s=o("bpxeT"),u=o("2TvXO"),l=o("4cG42"),d=o("Jmfug"),l=o("4cG42");var y=o("6JEwH"),k={btnSwitchDay:document.querySelector(".time-switch-day"),btnSwitchWeek:document.querySelector(".time-switch-week")};function w(e){switch(e){case l.Movie.trendTime.DAY:(0,y.disabledEl)(k.btnSwitchDay),(0,y.unlockEl)(k.btnSwitchWeek);break;case l.Movie.trendTime.WEEK:(0,y.disabledEl)(k.btnSwitchWeek),(0,y.unlockEl)(k.btnSwitchDay)}}function N(){(0,y.unlockEl)(k.btnSwitchDay),(0,y.unlockEl)(k.btnSwitchWeek)}k.btnSwitchDay.addEventListener("click",(function(){G.page=1,G.currentTrendTime=l.Movie.trendTime.DAY,S(G),w(l.Movie.trendTime.DAY),A()})),k.btnSwitchWeek.addEventListener("click",(function(){G.page=1,G.currentTrendTime=l.Movie.trendTime.WEEK,S(G),w(l.Movie.trendTime.WEEK),A()}));var x,T=new i,q={formEl:document.querySelector(".search-form"),paragraphEl:document.querySelector(".warning-notification")},M=null;function I(){return(I=e(s)(e(u).mark((function t(n){var a;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.disable(),e.prev=1,n.preventDefault(),""!==(M=n.target.query.value.trim())){e.next=8;break}return q.paragraphEl.innerHTML="Enter the name in the search field",T.enable(),e.abrupt("return");case 8:return(x=new(0,l.Movie)(M)).langCurrent=(0,d.getLanguageFromLS)(),e.next=12,x.fetchSearch();case 12:if(0!==(a=e.sent).total_results){e.next=18;break}return n.target.reset(),q.paragraphEl.innerHTML="Search result not successful. Enter the correct movie name and try again.",T.enable(),e.abrupt("return");case 18:v(a),n.target.reset(),q.paragraphEl.innerHTML="",console.log(a),x.lastPage=a.total_pages,h(a.results),N(),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(1),console.log(e.t0.message);case 30:case"end":return e.stop()}}),t,null,[[1,27]])})))).apply(this,arguments)}function A(){M=null}q.formEl.addEventListener("submit",(function(e){return I.apply(this,arguments)}));var G,R=new i;console.log(R.refs.preloader),null===M&&function(){R.refs.preloader.classList.remove("is-off"),G=new(0,l.Movie);var e=(0,d.getLanguageFromLS)();e?(G.langCurrent=e,(0,d.switchBtnLang)(G.langCurrent)):G.langCurrent=(0,d.setLanguageToLS)(l.Movie.language.ENGLISH);S(G),w(l.Movie.trendTime.DAY)}();l=o("4cG42");(d=o("Jmfug")).refs.btnSwitchEN.addEventListener("click",(function(){null===M?(G.langCurrent=(0,d.setLanguageToLS)(l.Movie.language.ENGLISH),S(G)):(x.langCurrent=(0,d.setLanguageToLS)(l.Movie.language.ENGLISH),b(x))})),d.refs.btnSwitchUA.addEventListener("click",(function(){null===M?(G.langCurrent=(0,d.setLanguageToLS)(l.Movie.language.UKRAINIAN),S(G)):(x.langCurrent=(0,d.setLanguageToLS)(l.Movie.language.UKRAINIAN),b(x))})),o("4cG42");var D=document.querySelector(".scroll-area"),Y=document.querySelector(".up-btn"),J=document.querySelector(".icon__button");function O(){D.scrollIntoView({block:"center",behavior:"smooth"})}Y.addEventListener("click",O),window.addEventListener("scroll",(function(){scrollY>230&&(J.classList.add("icon__button--opacity"),J.style.position="fixed"),scrollY<230&&(J.classList.remove("icon__button--opacity"),J.style.position="absolute"),scrollY>300?Y.classList.remove("is-hidden"):scrollY<300&&Y.classList.add("is-hidden")}));var C=new i,F={btnLoadPrevious:document.querySelector(".pagination-page__btn-previous"),btnLoadNext:document.querySelector(".pagination-page__btn-next")};F.btnLoadPrevious.addEventListener("click",(function(){if(C.disable(),null===M?1===G.page:1===x.page)return void C.enable();null===M?G.page-=1:x.page-=1,P(),O()})),F.btnLoadNext.addEventListener("click",(function(){if(C.disable(),null===M?G.page===G.lastPage:x.page===x.lastPage)return;null===M?G.page+=1:x.page+=1,P(),O()}));var K=document.querySelector(".pagination ul");function P(){null===M?S(G):b(x)}!function e(t){!function(e,t){var n="",a=t-1,o=t+1;t>1&&(n+='<li class="btn prev"><span><<</span></li>');t>2&&(e>3&&(n+='<li class="first numb"><span>1</span></li>'),t>3&&(n+='<li class="dots"><span>...</span></li>'));e>2&&(o+=1);t==e?a-=2:t==e-1?a-=1:1==e&&(a=1);for(var r=a;r<=o;r++)r>e||(r<1&&(r=1),n+='<li class="numb '.concat(t==r?"active":"",'"><span>').concat(r,"</span></li>"));t<e-1&&(t<e-2&&(n+='<li class="dots"><span>...</span></li>'),e>3&&(n+='<li class="last numb"><span>'.concat(e,"</span></li>")));t<e&&(n+='<li class="btn next"><span>>></span></li>');K.innerHTML="",K.insertAdjacentHTML("beforeend",n)}(20,t.page);var n={prev:document.querySelector(".prev"),numb:document.querySelectorAll(".numb"),next:document.querySelector(".next")},a=n.prev,o=n.next;n.numb.forEach((function(n){n.addEventListener("click",(function(n){var a=n.target.textContent;t.page=a,P(),e(t)}))})),a&&a.addEventListener("click",(function(){t.page-=1,P(),e(t)})),o&&o.addEventListener("click",(function(){t.page+=1,P(),e(t)}))}(G),o("3nfD2");l=o("4cG42");var H=document.querySelector("body"),U=document.querySelector(".gallery"),j=document.querySelector(".backdrop"),W=document.querySelector(".modal__button"),V=document.querySelector(".modal-info__container"),z=0,X={};U.addEventListener("click",(function(e){var t=JSON.parse(localStorage.getItem(_));e.preventDefault(),z=Number(e.target.dataset.id),t.map((function(e){var t,n,a,o,r,c,i,s,u,d;e.id===z&&(n=(t=e).poster_path,a=t.title,o=t.original_title,r=t.genre_ids,c=t.overview,i=t.vote_count,s=t.vote_average,u=t.popularity,d='\n      <img src="'.concat(n?l.Movie.IMG_PATH+n:"https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj",'" alt="').concat(a,'" class="modal-info__img">\n      <div class="modal-info">\n          <h2 class="modal-info__movie-name">').concat(a.toUpperCase(),'</h2>\n              <ul class="modal-info__list">\n              <li class="modal-info__item">\n                    <p class="modal-info__title">Vote / Votes<p>\n                    <div class="modal-info__content">\n                        <span class="modal-info__content-color"> ').concat(Math.round(10*s)/10,' </span> / <span class="modal-info__content-color modal-info__content-color--votes">').concat(i,'</span>\n                    </div>\n                </li>\n                <li class="modal-info__item">\n                    <p class="modal-info__title">Popularity</p>\n                    <div class="modal-info__content">').concat(u.toFixed(1),'</div>\n                </li>\n                  <li class="modal-info__item">\n                      <p class="modal-info__title">Original Title</p>\n                      <div class="modal-info__content modal-info__content--text ">').concat(o.toUpperCase(),'</div>\n                  </li>\n                  <li class="modal-info__item">\n                      <p class="modal-info__title">Genre</p>\n                      <div class="modal-info__content modal-info__content--text">').concat(g(r),'</div>\n                  </li>\n              </ul>\n                  <p class="modal-info__article-title">About</p>\n                  <p class="modal-info__article">').concat(c,'</p>\n                  <div class="container-btn">\n            <button type="button" class="btn" name="watched">add to watched</button>\n            <button type="button" class="btn" name="queue">add to queue</button>\n        </div>'),V.innerHTML=d,X=e)})),e.target!==e.currentTarget&&(H.classList.add("modal-open"),j.classList.remove("is-hidden"))})),W.addEventListener("click",(function(e){H.classList.remove("modal-open"),j.classList.add("is-hidden")})),V.addEventListener("click",(function(e){"watched"===e.target.name?ee():"queue"===e.target.name&&te()})),j.addEventListener("click",(function(e){e.target===e.currentTarget&&(H.classList.remove("modal-open"),j.classList.add("is-hidden"))}));var B=[],Z=[],Q="themovie-watched-lib",$="themovie-queue-lib";var ee=function(){B=JSON.parse(localStorage.getItem(Q))||[];var e=[];B.map((function(t){return e.push(t.id)})),e.includes(z)||(B.push(X),localStorage.setItem(Q,JSON.stringify(B)),console.log("watched:  "+e))},te=function(){Z=JSON.parse(localStorage.getItem($))||[];var e=[];Z.map((function(t){return e.push(t.id)})),e.includes(z)?console.log("есть уже"):(Z.push(X),localStorage.setItem($,JSON.stringify(Z)),console.log("queue:  "+e))},ne=document.querySelector(".footer-text__link"),ae=document.querySelector(".backdrop-team"),oe=document.querySelector(".modal-team__button"),re=document.querySelector("body");ne.addEventListener("click",(function(e){e.preventDefault(),ae.classList.remove("is-hidden"),re.classList.add("modal-team-open")})),oe.addEventListener("click",(function(e){ae.classList.add("is-hidden"),re.classList.remove("modal-team-open")}))}();
//# sourceMappingURL=index.e76cb2c4.js.map
